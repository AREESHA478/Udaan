<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - Udaan Career Counseling</title>
    <link rel="stylesheet" href="/css/theme.css">
    <link rel="stylesheet" href="/css/contact.css">
    <link rel="stylesheet" href="/css/auth-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body data-theme="light">
    <header>
        <nav class="navbar">
            <div class="logo">Udaan</div>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <!-- Career Test Link -->
                <li sec:authorize="!isAuthenticated()"><a href="#" onclick="event.preventDefault(); openModal('signin')" title="Please login to take the test">Career Test</a></li>
                <li sec:authorize="isAuthenticated()"><a href="/career-test">Career Test</a></li>
                
                <!-- Resources Link -->
                <li sec:authorize="!isAuthenticated()"><a href="#" onclick="event.preventDefault(); openModal('signin')" title="Please login to view resources">Resources</a></li>
                <li sec:authorize="isAuthenticated()"><a href="/resources">Resources</a></li>

                <li><a href="/about">About</a></li>
                <li><a href="/contact">Contact</a></li>
            </ul>
            <div class="theme-toggle-container">
                <button id="theme-toggle-btn" class="btn-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
             <!-- User Profile / Login Icon -->
            <div class="user-profile">
                <!-- If user is authenticated, show name and link to dashboard -->
                <div sec:authorize="isAuthenticated()" class="user-info">
                   <a th:href="@{/dashboard}" class="name-icon" th:text="${loggedInUserFirstName != null and loggedInUserFirstName.length() > 0 ? loggedInUserFirstName.substring(0, 1) : '?'}"></a>
                </div>
                <!-- If user is not authenticated, show login icon -->
                <i sec:authorize="!isAuthenticated()" class="fas fa-user-circle"></i>
            </div>

        </nav>
    </header>

    <main class="contact-page-content">
        <section class="contact-section">
            <div class="contact-info-card">
                <h2>Contact Information</h2>
                <div class="info-item">
                    <i class="fas fa-phone-alt"></i>
                    <span>+012 3456 789</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-envelope"></i>
                    <span>udaann@gmail.com</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>132 Dartmouth Street Boston,<br>Massachusetts 02156 United States</span>
                </div>
                <div class="design-elements">
                    <div class="circle large-circle"></div>
                    <div class="circle small-circle"></div>
                </div>
            </div>

            <div class="contact-form-card">
                <form class="contact-form" action="/contact" method="post">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name</label>
                            <input type="text" id="firstName" name="firstName" placeholder="Jhon">
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name</label>
                            <input type="text" id="lastName" name="lastName" placeholder="Doe">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" placeholder="Email Address">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" placeholder="+92 312 3456 789">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="message">Message</label>
                        <textarea id="message" name="message" rows="5" placeholder="Write your message."></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Send Message</button>
                </form>
            </div>
        </section>
    </main>

    <!-- Authentication Modal -->
    <div class="modal-overlay" id="auth-modal">
        <div class="auth-modal-content">
            <button class="close-btn" onclick="closeModal()">&times;</button>

            <!-- Sign Up Form (Initial View) -->
            <div id="signup-form" class="auth-form active">
                <h2>Create Account</h2>
                <div th:if="${signupError}" class="auth-error-message" style="display: block;" th:text="${signupError}">
                    <!-- Signup error message will appear here -->
                </div>
                <button class="btn btn-social"><i class="fab fa-google"></i> Continue with Google</button>
                <div class="divider">OR</div>
                <form action="/signup" method="post">
                    <!-- Add this hidden input for CSRF token -->
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <div class="form-row">
                        <div class="form-group">
                            <label for="signup-firstName">First Name</label>
                            <input type="text" id="signup-firstName" name="firstName" placeholder="Enter your first name" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-lastName">Last Name</label>
                            <input type="text" id="signup-lastName" name="lastName" placeholder="Enter your last name" required>
                        </div>
                    </div>
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" name="email" placeholder="Enter your email" required>
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" name="password" placeholder="Create a password" required>
                    <button type="submit" class="btn btn-primary" style="width:100%; margin-top: 15px;">Create Account</button>
                </form>
                <div class="auth-footer-link">
                    Already have an account? <a href="#" onclick="event.preventDefault(); showTab('signin')">Sign In</a>
                </div>
            </div>

            <!-- Sign In Form -->
            <div id="signin-form" class="auth-form">
                <h2>Welcome Back!</h2>
                <div th:if="${param.error}" id="signin-error" class="auth-error-message" style="display: block;">
                    Something is wrong Email or Password
                </div>
                <form action="/login" method="post">
                    <!-- Add this hidden input for CSRF token -->
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <label for="signin-email">Email</label>
                    <input type="email" id="signin-email" name="username" placeholder="Enter your email" required>
                    <label for="signin-password">Password <a href="#" class="forgot-link">Forgot?</a></label>
                    <input type="password" id="signin-password" name="password" placeholder="Enter your password" required>
                    <button type="submit" class="btn btn-primary" style="width:100%; margin-top: 15px;">Sign In</button>
                </form>
                <div class="auth-footer-link">
                    Don't have an account? <a href="#" onclick="event.preventDefault(); showTab('signup')">Sign Up</a>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-info">
                <p>Empowering students to discover their perfect career path through AI-driven guidance.</p>
            </div>
            <div class="quick-links">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/about">About</a></li>
                    <li><a href="/contact">Contact</a></li>
                </ul>
            </div>
            <div class="connect-with-us">
                <h4>Connect With Us</h4>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                </div>
            </div>
        </div>
        <div class="copyright">
            &copy; 2025 Udaan. All rights reserved.
        </div>
    </footer>

    <script src="/js/toggle.js"></script>
    <!-- Auth script should be present on all pages to handle the modal -->
    <script src="/js/auth-script.js"></script>
    <script th:inline="javascript">
        /*<![CDATA[*/
        document.addEventListener('DOMContentLoaded', function() {
            // For signup error
            const showSignup = /*[[${showSignup}]]*/ null;
            if (showSignup) {
                openModal('signup');
            }
            // For signup success
            const showSignin = /*[[${showSignin}]]*/ null;
            if (showSignin) {
                openModal('signin');
            }
        });
        /*]]>*/
    </script>
</body>
</html>